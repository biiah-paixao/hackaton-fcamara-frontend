<div class="browser-wrapper">
    <div class="container h-100">
        <header *ngIf="!showFinish">
            <div class="d-flex justify-content-between align-items-center">
                <div class="p-2">
                    <img src="./../../assets/back-button.svg" alt="" (click)="goBack()" class="back-button-animate">
                </div>
                <div class="p-2">
                    <img src="./../../assets/close-button.svg" alt="" (click)="goHome()" class="close-button-animate">
                </div>
            </div>
        </header>
        <div class="row min-vh-100 justify-content-center align-items-center" *ngIf="!showFinish">
            <div class="col-10 p-0">
                <div *ngIf="true">
                    <div class="step-1" *ngIf="showStep1" [@enterAnimation]>
                        <img src="./../../assets/person-location.svg" alt="" class="step-img">
                        <div class="step-titulo">
                            E em qual escritório você<br>vai trabalhar?
                        </div>
                        <button class="option1-btn" (click)="setSantos()">Santos</button>
                        <button class="option2-btn" (click)="setSP()">São Paulo</button>
                        <img src="./../../assets/appointment-step-1.svg" alt="" class="step-img">
                    </div>
                    <div class="step-2" *ngIf="showStep2" [@enterAnimation]>
                        <div class="step-titulo">
                            Em qual dia?
                        </div>
                        <div class="d-flex justify-content-center align-items-center">
                            <div class="col-12 m-2">
                                <mat-calendar [dateFilter]="myFilter" #picker [minDate]="minDate" [maxDate]="maxDate"
                                    (selectedChange)="setDate($event)"></mat-calendar>   
                            </div>
                        </div>
                        <div *ngIf="this.form.value.data" class="d-flex  justify-content-center align-items-center mb-5">
                            Data selecionada: {{this.form.value.data}}
                        </div>
                        <div class="step-titulo" *ngIf="dataFiltro">
                            Em qual período?
                        </div>

                        <mat-radio-group class="radio-group" *ngIf="dataFiltro">
                            <div class="row justify-content-center align-items-center mb-3">
                                <div class="col-4">
                                    <mat-radio-button class="radio-button" value="M" (click)="setTurno('M')" [checked]="form.value.turno == 'M'">
                                        <div class="turno-text">Manhã</div>
                                        <div class="detail-text">8h - 13h</div>
                                    </mat-radio-button>
                                </div>
                                <div class="col-8">
                                    <div class="detail-text float-end">{{dataFiltro?.Capacidade_Usada_Manha*100}}%</div>
                                    <mat-progress-bar mode="determinate"  [value]="dataFiltro?.Capacidade_Usada_Manha*100" class="w-100 m-1">
                                    </mat-progress-bar>
                                    <div class="detail-text float-end">Capacidade</div>
                                </div>
                            </div>

                            <div class="row justify-content-center align-items-center mb-3">
                                <div class="col-4">
                                    <mat-radio-button class="radio-button" value="T" (click)="setTurno('T')" [checked]="form.value.turno == 'T'">
                                        <div class="turno-text">Tarde</div>
                                        <div class="detail-text">13h - 18h</div>
                                    </mat-radio-button>
                                </div>
                                <div class="col-8">
                                    <div class="detail-text float-end">{{dataFiltro?.Capacidade_Usada_Tarde*100}}%</div>
                                    <mat-progress-bar mode="determinate" [value]="dataFiltro?.Capacidade_Usada_Tarde*100" class="w-100 m-1">
                                    </mat-progress-bar>
                                    <div class="detail-text float-end">Capacidade</div>
                                </div>
                            </div>

                            <div class="row justify-content-center align-items-center mb-3">
                                <div class="col-4">
                                    <mat-radio-button class="radio-button" value="A" (click)="setTurno('A')" [checked]="form.value.turno == 'A'">
                                        <div class="turno-text">Ambos</div>
                                        <div class="detail-text">8h - 18h</div>
                                    </mat-radio-button>
                                </div>
                                <div class="col-8">
                                    <div class="detail-text float-end">{{dataFiltro?.Capacidade_Ambos*100}}%</div>
                                    <mat-progress-bar mode="determinate" [value]="dataFiltro?.Capacidade_Ambos*100" class="w-100 m-1">
                                    </mat-progress-bar>
                                    <div class="detail-text float-end">Capacidade</div>
                                </div>
                            </div>
                        </mat-radio-group>
                        <button (click)="goForward()" [disabled]="!form.value.turno || !form.value.data">Agendar</button>
                        <img src="./../../assets/appointment-step-2.svg" alt="" class="step-img">
                    </div>
                    <div class="step-3" *ngIf="showStep3" [@enterAnimation]>
                        <img src="./../../assets/person-invite.svg" alt="" class="step-img">
                        <div class="step-titulo">
                            Fulano(a), você quer<br>convidar alguém?
                        </div>
                        <button class="option1-btn" (click)="finishAppointment(false)">Hoje não</button>
                        <button class="option2-btn" (click)="goForward()">Quero sim</button>
                        <img src="./../../assets/appointment-step-3.svg" alt="" class="step-img">
                    </div>
                    <div class="step-4" *ngIf="showStep4" [@enterAnimation]>
                        <div class="step-titulo">
                            #SangueLaranja
                        </div>
                        <div class="step-titulo">
                            {{emails.length}}/10
                        </div>
                        <div class="fixed-list">
                            <div class="person-card" *ngFor="let func of funcionarios" (click)="addOrRemoveEmail(func)"
                                [ngClass]="{'person-card-selected': func.selected}">
                                <img [src]="'./../../assets/avatars/' + func.email + '.jpg'" alt="">
                                <span>{{func.nome | shortName}}</span>
                            </div>
                        </div>
                        <button (click)="finishAppointment(true)" [disabled]="!emails.length">Convidar</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="row finish-wrapper" *ngIf="showFinish" [@enterAnimation]>
            <img src="./../../assets/person-confirmation.svg" alt="" class="finish-img p-0">
        </div>
        <div class="row justify-content-center" *ngIf="showFinish" [@enterAnimation]>
            <div class="col-10 p-0 m-0">
                <div class="step-titulo" *ngIf="!invitedFriends">Tudo certo com seu<br>agendamento,
                    Fulano(a).
                </div>
                <div class="step-titulo" *ngIf="invitedFriends">Prontinho, Fulano(a). Já<br>enviamos os
                    convites.
                </div>
                <div class="step-instructions">
                    Lembra de manter a distância dos<br>colegas e de usar a máscara o<br>tempo todo, ok?
                </div>
                <div class="protocolo-wrapper d-flex justify-content-center align-items-center">
                    <a href="https://www.slideshare.net/FCamara_Consultoria/plano-de-retomada-fcamara"
                        target="_blank">Acesse os protocolos de segurança</a>
                    <img src="./../../assets/right-arrow.svg" alt="">
                </div>
                <button (click)="goHome()">Pode deixar</button>
            </div>
        </div>
    </div>
</div>